% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\documentclass[
]{article}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
%\usepackage{amsfonts, latexsym}
\usepackage{graphicx}
\usepackage{float}
\usepackage{luatexja}
\usepackage{luatexja-fontspec}
%\setmainfont{Times New Roman}
%\setmainjfont{Yu Mincho}
%\setsansjfont{Yu Mincho}
%\setmonofont{Yu Mincho}


\usepackage{fancyhdr}
\usepackage{lastpage}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[C]{\thepage{} / \pageref{LastPage}}

\newcommand{\fixedhrule}{
  \noindent\rule{0.8\linewidth}{0.4pt}
}
\usepackage{underscore}

\usepackage{tcolorbox}
\usepackage{listings}
\tcbuselibrary{listings}

\lstset{
  basicstyle=\ttfamily\small,
  breaklines=true,
  breakatwhitespace=true,
  columns=fullflexible,
  keepspaces=true
}

\tcbset{
  mycode/.style={
    colback=gray!12,
    colframe=gray!60,
    fontupper=\ttfamily\small,
    boxrule=0.4pt,
    arc=2mm,
    left=2mm,right=2mm,top=1mm,bottom=1mm,
    listing only,
    listing options={style=default}
  }
}

% --- ここから 追記 --------------------------------
\usepackage[hang,small,bf]{caption}
\captionsetup[figure]{labelformat=empty}  % 「図 1」のような番号付けをしない
\captionsetup[table]{labelformat=empty}   % テーブル番号も不要なら同様に設定

\usepackage[subrefformat=parens]{subcaption}
\captionsetup{compatibility=false}

% --- ここまで 追記 --------------------------------

\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={TeXエスケープ検証},
  pdfauthor={XXXXXX},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}



\makeatletter
% まず \@approver を空で初期化しておく
\def\@approver{}

% \approver{...} で \@approver を上書きできるように定義
\newcommand{\approver}[1]{\gdef\@approver{#1}}

\renewcommand{\maketitle}{
  \begin{center}
    {\LARGE\bfseries \@title \par}
    \vspace{1em}
  \end{center}

  \begin{flushright}  % 右寄せブロック開始
        {\small 著者: \@author \par}              % 著者
    \vspace{0.5em}
            \vspace{0.5em}
    {\small \@date \par}                % 日付
    \vspace{0.5em}\rule{\linewidth}{0.4pt} % 薄い横線
  \end{flushright}

  }
\makeatother

\usepackage{tikz}
\newcommand{\maru}[1]{%
  \tikz[baseline=(char.base)]\node[shape=circle,draw,inner sep=1pt] (char) {#1};%
}


\title{TeXエスケープ検証}
\author{XXXXXX}
\date{2025年8月}

\begin{document}
\maketitle

\section{特殊文字祭り}\label{ux7279ux6b8aux6587ux5b57ux796dux308a}

\subsection{通常文字}\label{ux901aux5e38ux6587ux5b57}

\% パーセント, \_ アンダースコア, \# ハッシュ, \& アンパサンド, \$ ドル,
\{ \} 波括弧, \textasciitilde{} チルダ, \^{} ハット

\subsection{URL / パス}\label{url-ux30d1ux30b9}

\begin{itemize}
\tightlist
\item
  https://example.com/a\_b?x=1\&y=2\#sec
\item
  C:\path\to\file\_v1.2\foo\%bar.txt
\end{itemize}

\subsection{インラインコード}\label{ux30a4ux30f3ux30e9ux30a4ux30f3ux30b3ux30fcux30c9}

\texttt{a\_b\_c}, \texttt{100\%}, \texttt{x\^{}2},
\texttt{C:\textbackslash{}path\textbackslash{}foo}

\subsection{コードブロック}\label{ux30b3ux30fcux30c9ux30d6ux30edux30c3ux30af}

\begin{tcolorbox}[mycode]
\begin{lstlisting}
a_b_c
100%
x^2 + y^2
\LaTeX \textbf{bold}
\end{lstlisting}
\end{tcolorbox}

\subsection{\texorpdfstring{数式（\(…\)
はそのまま）}{数式（\ldots{} はそのまま）}}\label{ux6570ux5f0f-ux306fux305dux306eux307eux307e}

インライン: \(x^2 + y^2 = z^2\)

ディスプレイ:

\[
E = mc^2
\]

\subsection{矢印・記号}\label{ux77e2ux5370ux8a18ux53f7}

→：\texttt{-\textgreater{}}, ⇔：\texttt{\textless{}-\textgreater{}}\\
≦：\texttt{\textless{}=}, ≧：\texttt{\textgreater{}=}, ±：\texttt{+-}

\end{document}
